@{
    ViewData["Title"] = "Home Page";
}

<div class="hero" style="background-image: url('/carrentals-master/images/hero_1_a.jpg');">
    <div class="container">
        <div class="row align-items-center justify-content-center">
            <div class="col-lg-10">

                <div class="row mb-5">
                    <div class="col-lg-7 intro">
                        <h1><strong>Rent a car</strong> is within your fingertips.</h1>
                    </div>
                </div>

                <form asp-action="Loading" method="get" class="trip-form">
                    <div class="row align-items-center mb-3">
                        <!-- Pick-Up Location -->
                        <div class="col-md-3 mb-3 mb-md-0">
                            <label for="pickupLocation" class="text-white">Pick-Up Location</label>
                            <select name="dropoffLocation" id="dropoffLocation" class="form-control px-3">
                                <option value="">Select Drop-Off Location</option>
                                <option value="Amman">Amman</option>
                                <option value="Queen Alia Airport">Queen Alia Airport</option>
                                <option value="Irbid">Irbid</option>
                                <option value="Balqa">Balqa</option>
                                <option value="Karak">Karak</option>
                                <option value="Maan">Maan</option>
                                <option value="Zarqa">Zarqa</option>
                                <option value="Mafraq">Mafraq</option>
                                <option value="Jerash">Jerash</option>
                                <option value="Ajloun City">Ajloun</option>
                            </select>
                        </div>

                        <!-- Drop-Off Location -->
                        <div class="col-md-3 mb-3 mb-md-0">
                            <label for="dropoffLocation" class="text-white">Drop-Off Location</label>
                            <select name="dropoffLocation" id="dropoffLocation" class="form-control px-3">
                                <option value="">Select Drop-Off Location</option>
                                <option value="Amman">Amman</option>
                                <option value="Queen Alia Airport">Queen Alia Airport</option>
                                <option value="Irbid">Irbid</option>
                                <option value="Balqa">Balqa</option>
                                <option value="Karak">Karak</option>
                                <option value="Maan">Maan</option>
                                <option value="Zarqa">Zarqa</option>
                                <option value="Mafraq">Mafraq</option>
                                <option value="Jerash">Jerash</option>
                                <option value="Ajloun City">Ajloun</option>
                            </select>
                        </div>

                        <!-- Start Date -->
                        <div class="col-md-3 mb-3 mb-md-0">
                            <label for="startDate" class="text-white">Start Date</label>
                            <input type="datetime-local" name="startDate" id="startDate"
                                   value="@ViewBag.StartDate"
                                   min="@DateTime.Now.ToString("yyyy-MM-ddTHH:mm")"
                                   class="form-control px-3">
                        </div>

                        <!-- End Date -->
                        <div class="col-md-3 mb-3 mb-md-0">
                            <label for="endDate" class="text-white">End Date</label>
                            <input type="datetime-local" name="endDate" id="endDate"
                                   value="@ViewBag.EndDate"
                                   min="@DateTime.Now.ToString("yyyy-MM-ddTHH:mm")"
                                   class="form-control px-3">
                        </div>

                    </div>

                    <!-- Flight Information -->

                    <!-- Search Button -->
                    <div class="row">
                        <div class="col-md-12">
                            <input type="submit" value="Search Now" class="btn btn-primary btn-block py-3 mt-3">
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>
@section Scripts {
    <script>
        const startDateInput = document.getElementById("startDate");
        const endDateInput = document.getElementById("endDate");

        startDateInput.addEventListener("change", function () {
            const startDate = new Date(this.value);
            if (!isNaN(startDate)) {
                const isoString = startDate.toISOString().slice(0, 16);
                endDateInput.min = isoString;

                // Optional: reset end date if it's before the new start date
                const endDate = new Date(endDateInput.value);
                if (endDate < startDate) {
                    endDateInput.value = isoString;
                }
            }
        });
    </script>
}